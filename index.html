<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Tracking Dashboard | Ignite Positive Changes</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fraunces:wght@600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --ignite-red: #cf462e;
            --ignite-yellow: #ffcd1d;
            --ignite-navy: #35575f;
            --ignite-sage: #728b8f;
            --ignite-orange: #faa22b;
            --ignite-cream: #fffdfc;
            --red-dark: #b53d28;
            --navy-light: #456a73;
            --white: #FFFFFF;
            --gray-50: #F9FAFB;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-300: #D1D5DB;
            --gray-400: #9CA3AF;
            --gray-500: #6B7280;
            --gray-600: #4B5563;
            --gray-700: #374151;
            --gray-800: #1F2937;
            --green-500: #10b981;
            --green-100: #d1fae5;
            --yellow-500: #f59e0b;
            --yellow-100: #fef3c7;
            --red-500: #ef4444;
            --red-100: #fee2e2;
            --blue-500: #3b82f6;
            --blue-100: #dbeafe;
            --purple-500: #8b5cf6;
            --shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--ignite-cream);
            color: var(--gray-700);
            line-height: 1.6;
            min-height: 100vh;
        }

        .header {
            background: var(--ignite-navy);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-img { height: 45px; }

        .back-link {
            color: var(--gray-300);
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .back-link:hover { color: var(--white); }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 30px;
        }

        .tool-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .tool-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--ignite-red) 0%, var(--ignite-orange) 100%);
            color: var(--white);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
        }

        .tool-header h1 {
            font-family: 'Fraunces', serif;
            font-size: 2.5rem;
            color: var(--ignite-navy);
            margin-bottom: 10px;
        }

        .tool-header p {
            font-size: 1.1rem;
            color: var(--gray-500);
            max-width: 600px;
            margin: 0 auto;
        }

        .tabs {
            display: flex;
            justify-content: center;
            gap: 8px;
            background: var(--white);
            padding: 8px;
            border-radius: 16px;
            max-width: 400px;
            margin: 0 auto 30px;
        }

        .tab {
            flex: 1;
            padding: 14px 24px;
            border: none;
            background: transparent;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            font-family: 'DM Sans', sans-serif;
            color: var(--gray-500);
            cursor: pointer;
            transition: all 0.3s;
        }

        .tab:hover { color: var(--gray-700); background: var(--gray-50); }
        .tab.active { background: var(--ignite-navy); color: var(--white); }

        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Summary Cards */
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 900px) {
            .summary-grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 500px) {
            .summary-grid { grid-template-columns: 1fr; }
        }

        .summary-card {
            background: var(--white);
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .summary-card.highlight {
            background: linear-gradient(135deg, var(--ignite-navy) 0%, var(--navy-light) 100%);
            color: var(--white);
        }

        .summary-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--gray-500);
            margin-bottom: 8px;
        }

        .summary-card.highlight .summary-label { color: rgba(255,255,255,0.8); }

        .summary-value {
            font-family: 'Fraunces', serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--ignite-navy);
        }

        .summary-card.highlight .summary-value { color: var(--ignite-yellow); }

        .summary-sub {
            font-size: 0.85rem;
            color: var(--gray-400);
            margin-top: 5px;
        }

        .summary-card.highlight .summary-sub { color: rgba(255,255,255,0.7); }

        /* Timer Section */
        .timer-section {
            background: var(--white);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .timer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .timer-title {
            font-family: 'Fraunces', serif;
            font-size: 1.3rem;
            color: var(--ignite-navy);
        }

        .timer-row {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .timer-row select, .timer-row input {
            padding: 12px 16px;
            border: 2px solid var(--gray-200);
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'DM Sans', sans-serif;
        }

        .timer-row select:focus, .timer-row input:focus {
            outline: none;
            border-color: var(--ignite-orange);
        }

        .timer-row .client-select { width: 200px; }
        .timer-row .project-input { flex: 1; min-width: 200px; }

        .timer-display {
            display: flex;
            align-items: center;
            gap: 15px;
            background: var(--gray-50);
            padding: 15px 25px;
            border-radius: 12px;
        }

        .timer-time {
            font-family: 'Fraunces', serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--ignite-navy);
            min-width: 120px;
        }

        .timer-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .timer-btn.start {
            background: var(--green-500);
            color: var(--white);
        }

        .timer-btn.stop {
            background: var(--ignite-red);
            color: var(--white);
        }

        .timer-btn:hover { transform: scale(1.05); }

        /* Manual Entry */
        .manual-entry {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--gray-200);
        }

        .manual-row {
            display: flex;
            gap: 15px;
            align-items: flex-end;
            flex-wrap: wrap;
        }

        .manual-group {
            flex: 1;
            min-width: 120px;
        }

        .manual-group label {
            display: block;
            font-size: 0.85rem;
            color: var(--gray-600);
            margin-bottom: 5px;
        }

        .manual-group input, .manual-group select {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            font-size: 0.95rem;
            font-family: 'DM Sans', sans-serif;
        }

        .add-entry-btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--ignite-red) 0%, var(--red-dark) 100%);
            color: var(--white);
            border: none;
            border-radius: 10px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
        }

        .add-entry-btn:hover { transform: translateY(-2px); }

        /* Entries Table */
        .entries-section {
            background: var(--white);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .entries-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .entries-title {
            font-family: 'Fraunces', serif;
            font-size: 1.3rem;
            color: var(--ignite-navy);
        }

        .filter-row {
            display: flex;
            gap: 10px;
        }

        .filter-row select {
            padding: 8px 12px;
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            font-size: 0.9rem;
            font-family: 'DM Sans', sans-serif;
        }

        .entries-table {
            width: 100%;
            border-collapse: collapse;
        }

        .entries-table th {
            text-align: left;
            padding: 12px 15px;
            background: var(--gray-50);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--gray-500);
        }

        .entries-table td {
            padding: 15px;
            border-bottom: 1px solid var(--gray-100);
            font-size: 0.9rem;
        }

        .entries-table tr:hover { background: var(--gray-50); }

        .client-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
            background: var(--blue-100);
            color: #1e40af;
        }

        .hours-cell {
            font-weight: 600;
            color: var(--ignite-navy);
        }

        .delete-btn {
            width: 32px;
            height: 32px;
            border: none;
            background: var(--gray-100);
            border-radius: 6px;
            cursor: pointer;
            color: var(--gray-500);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .delete-btn:hover { background: var(--red-100); color: var(--red-500); }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: var(--gray-400);
        }

        /* Client Breakdown */
        .breakdown-section {
            background: var(--white);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .breakdown-title {
            font-family: 'Fraunces', serif;
            font-size: 1.3rem;
            color: var(--ignite-navy);
            margin-bottom: 20px;
        }

        .breakdown-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }

        .client-card {
            background: var(--gray-50);
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid var(--blue-500);
        }

        .client-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .client-card-name {
            font-weight: 600;
            color: var(--ignite-navy);
        }

        .client-card-hours {
            font-family: 'Fraunces', serif;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--ignite-navy);
        }

        .client-bar {
            height: 8px;
            background: var(--gray-200);
            border-radius: 4px;
            overflow: hidden;
        }

        .client-bar-fill {
            height: 100%;
            background: var(--blue-500);
            border-radius: 4px;
        }

        .client-card-percent {
            font-size: 0.8rem;
            color: var(--gray-500);
            margin-top: 8px;
        }

        /* Action Bar */
        .action-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--gray-200);
            flex-wrap: wrap;
            gap: 15px;
        }

        .action-info { font-size: 0.9rem; color: var(--gray-500); }

        .btn {
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 0.95rem;
            font-weight: 600;
            font-family: 'DM Sans', sans-serif;
            cursor: pointer;
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-secondary { background: var(--gray-100); color: var(--gray-700); }
        .btn-secondary:hover { background: var(--gray-200); }

        /* Learn Tab */
        .learn-content-wrapper { max-width: 900px; margin: 0 auto; }

        .why-section {
            background: linear-gradient(135deg, var(--ignite-navy) 0%, var(--navy-light) 100%);
            border-radius: 20px;
            padding: 35px 40px;
            margin-bottom: 30px;
            color: var(--white);
        }

        .why-section h2 {
            font-family: 'Fraunces', serif;
            font-size: 1.4rem;
            margin-bottom: 15px;
        }

        .why-section p {
            font-size: 1rem;
            line-height: 1.7;
            color: var(--gray-300);
            margin-bottom: 15px;
        }

        .why-section strong { color: var(--ignite-orange); }

        .why-callout {
            background: rgba(255,255,255,0.1);
            border-left: 3px solid var(--ignite-orange);
            padding: 15px 20px;
            margin-top: 20px;
            border-radius: 0 10px 10px 0;
        }

        .why-callout p { color: var(--white); font-size: 0.95rem; margin: 0; }

        .pro-tips {
            background: linear-gradient(135deg, var(--ignite-cream) 0%, #fff 100%);
            border: 2px solid var(--ignite-yellow);
            border-radius: 20px;
            padding: 30px;
        }

        .pro-tips h3 {
            font-family: 'Fraunces', serif;
            font-size: 1.2rem;
            color: var(--ignite-navy);
            margin-bottom: 20px;
        }

        .pro-tips ul { list-style: none; }

        .pro-tips li {
            padding: 12px 0;
            padding-left: 30px;
            position: relative;
            font-size: 0.9rem;
            color: var(--gray-700);
            border-bottom: 1px solid var(--gray-200);
        }

        .pro-tips li:last-child { border-bottom: none; }
        .pro-tips li::before { content: 'üí°'; position: absolute; left: 0; }
        .pro-tips li strong { color: var(--ignite-navy); }

        .footer {
            text-align: center;
            padding: 40px 30px 30px;
            border-top: 1px solid var(--gray-200);
            margin-top: 50px;
        }

        .footer-brand { font-size: 0.85rem; color: var(--gray-500); margin-bottom: 8px; }
        .footer-brand a { color: var(--ignite-navy); text-decoration: none; font-weight: 600; }
        .footer-copyright { font-size: 0.75rem; color: var(--gray-400); }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo-container">
            <img src="YOUR-LOGO-URL-HERE" alt="Ignite Positive Changes" class="logo-img">
        </div>
        <a href="javascript:history.back()" class="back-link">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Back to Toolkit
        </a>
    </header>

    <div class="container">
        <div class="tool-header">
            <div class="tool-badge">Dashboard</div>
            <h1>Time Tracking Dashboard</h1>
            <p>Track hours by client and project to understand where your time really goes.</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('tracker')">
                <span>‚è±Ô∏è</span> Tracker
            </button>
            <button class="tab" onclick="switchTab('learn')">
                <span>üìö</span> Learn
            </button>
        </div>

        <div id="tracker-tab" class="tab-content active">
            <!-- Summary Cards -->
            <div class="summary-grid">
                <div class="summary-card highlight">
                    <div class="summary-label">This Week</div>
                    <div class="summary-value" id="weekHours">0h</div>
                    <div class="summary-sub" id="weekTarget">of 40h target</div>
                </div>
                <div class="summary-card">
                    <div class="summary-label">This Month</div>
                    <div class="summary-value" id="monthHours">0h</div>
                    <div class="summary-sub" id="monthEntries">0 entries</div>
                </div>
                <div class="summary-card">
                    <div class="summary-label">Billable %</div>
                    <div class="summary-value" id="billablePercent">0%</div>
                    <div class="summary-sub">this month</div>
                </div>
                <div class="summary-card">
                    <div class="summary-label">Top Client</div>
                    <div class="summary-value" id="topClient">‚Äî</div>
                    <div class="summary-sub" id="topClientHours">0 hours</div>
                </div>
            </div>

            <!-- Timer Section -->
            <div class="timer-section">
                <div class="timer-header">
                    <div class="timer-title">‚è±Ô∏è Quick Timer</div>
                </div>
                <div class="timer-row">
                    <select class="client-select" id="timerClient">
                        <option value="">Select Client...</option>
                    </select>
                    <input type="text" class="project-input" id="timerProject" placeholder="What are you working on?">
                    <div class="timer-display">
                        <div class="timer-time" id="timerDisplay">00:00:00</div>
                        <button class="timer-btn start" id="timerBtn" onclick="toggleTimer()">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                        </button>
                    </div>
                </div>

                <div class="manual-entry">
                    <div style="font-size: 0.9rem; color: var(--gray-600); margin-bottom: 12px;">Or add time manually:</div>
                    <div class="manual-row">
                        <div class="manual-group">
                            <label>Client</label>
                            <select id="manualClient">
                                <option value="">Select...</option>
                            </select>
                        </div>
                        <div class="manual-group" style="flex: 2;">
                            <label>Description</label>
                            <input type="text" id="manualDesc" placeholder="What did you work on?">
                        </div>
                        <div class="manual-group" style="max-width: 100px;">
                            <label>Hours</label>
                            <input type="number" id="manualHours" placeholder="2.5" step="0.25" min="0">
                        </div>
                        <div class="manual-group" style="max-width: 140px;">
                            <label>Date</label>
                            <input type="date" id="manualDate">
                        </div>
                        <div class="manual-group" style="max-width: 100px;">
                            <label>Billable?</label>
                            <select id="manualBillable">
                                <option value="yes">Yes</option>
                                <option value="no">No</option>
                            </select>
                        </div>
                        <button class="add-entry-btn" onclick="addManualEntry()">+ Add</button>
                    </div>
                </div>
            </div>

            <!-- Client Breakdown -->
            <div class="breakdown-section">
                <div class="breakdown-title">üìä Hours by Client (This Month)</div>
                <div class="breakdown-grid" id="clientBreakdown">
                    <!-- Dynamic -->
                </div>
            </div>

            <!-- Entries Table -->
            <div class="entries-section">
                <div class="entries-header">
                    <div class="entries-title">üìã Time Entries</div>
                    <div class="filter-row">
                        <select id="filterClient" onchange="renderEntries()">
                            <option value="">All Clients</option>
                        </select>
                        <select id="filterPeriod" onchange="renderEntries()">
                            <option value="week">This Week</option>
                            <option value="month" selected>This Month</option>
                            <option value="all">All Time</option>
                        </select>
                    </div>
                </div>

                <table class="entries-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Client</th>
                            <th>Description</th>
                            <th>Hours</th>
                            <th>Billable</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="entriesBody">
                        <!-- Dynamic -->
                    </tbody>
                </table>

                <div class="empty-state" id="emptyState" style="display: none;">
                    No time entries yet. Start the timer or add time manually above.
                </div>

                <div class="action-bar">
                    <div class="action-info"><strong>Auto-saved</strong> to your browser</div>
                    <div style="display: flex; gap: 12px;">
                        <button class="btn btn-secondary" onclick="manageClients()">
                            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"/></svg>
                            Manage Clients
                        </button>
                        <button class="btn btn-secondary" onclick="exportReport()">
                            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                            Export Report
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="learn-tab" class="tab-content">
            <div class="learn-content-wrapper">
                <div class="why-section">
                    <h2>‚è±Ô∏è Why Track Your Time?</h2>
                    <p><strong>You can't improve what you don't measure.</strong> Most people dramatically underestimate time on low-value tasks and overestimate time on client work.</p>
                    <p>Tracking reveals the truth: where your hours actually go vs. where you think they go.</p>
                    <div class="why-callout">
                        <p>üìä <strong>The revelation:</strong> Most service providers discover they're only 50-60% billable when they start tracking. The rest goes to admin, marketing, and "busywork."</p>
                    </div>
                </div>

                <div class="pro-tips">
                    <h3>üíº Pro Tips</h3>
                    <ul>
                        <li><strong>Track everything, not just billable.</strong> Admin, marketing, email ‚Äî all of it. You need the full picture to optimize.</li>
                        <li><strong>Use the timer, not memory.</strong> Logging "about 3 hours" at day's end is wildly inaccurate. Real-time tracking is 10x more accurate.</li>
                        <li><strong>Review weekly.</strong> A quick 10-minute review each Friday reveals patterns. Which clients take too long? What's eating unbillable time?</li>
                        <li><strong>Set a billable target.</strong> Aim for 60-70% billable time. Below 50% means you need help or fewer distractions.</li>
                        <li><strong>Track by project, not just client.</strong> "Client work" is too vague. "Client A - Monthly reporting" tells you which services are time sinks.</li>
                        <li><strong>Don't track to the minute.</strong> 15-minute increments are fine. Obsessive precision wastes the time you're trying to save.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Client Modal -->
    <div class="modal-overlay" id="clientModal" style="display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.5); align-items:center; justify-content:center; z-index:1000;">
        <div style="background:var(--white); border-radius:20px; padding:30px; max-width:400px; width:90%;">
            <h3 style="font-family:'Fraunces',serif; color:var(--ignite-navy); margin-bottom:20px;">Manage Clients</h3>
            <div id="clientList" style="margin-bottom:20px;"></div>
            <div style="display:flex; gap:10px;">
                <input type="text" id="newClientName" placeholder="New client name" style="flex:1; padding:12px; border:2px solid var(--gray-200); border-radius:8px; font-size:1rem;">
                <button onclick="addClient()" style="padding:12px 20px; background:var(--ignite-red); color:white; border:none; border-radius:8px; font-weight:600; cursor:pointer;">Add</button>
            </div>
            <button onclick="closeClientModal()" style="width:100%; margin-top:15px; padding:12px; background:var(--gray-100); border:none; border-radius:8px; font-weight:600; cursor:pointer;">Close</button>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-brand">Part of the <a href="#">Ignite Positive Changes Business Toolkit</a></div>
        <div class="footer-copyright">¬© 2025 Discover Your Success with Alayna Marie | Built for Ignite Positive Changes Fractional</div>
    </footer>

    <script>
        let clients = [];
        let entries = [];
        let timerRunning = false;
        let timerStart = null;
        let timerInterval = null;

        const clientColors = ['#3b82f6', '#10b981', '#f59e0b', '#8b5cf6', '#ef4444', '#06b6d4', '#ec4899', '#84cc16'];

        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            document.getElementById('manualDate').value = new Date().toISOString().split('T')[0];
            renderAll();
        });

        function loadData() {
            clients = JSON.parse(localStorage.getItem('timeTrackingClients') || '["General", "Admin", "Marketing"]');
            entries = JSON.parse(localStorage.getItem('timeTrackingEntries') || '[]');
        }

        function saveData() {
            localStorage.setItem('timeTrackingClients', JSON.stringify(clients));
            localStorage.setItem('timeTrackingEntries', JSON.stringify(entries));
        }

        function renderAll() {
            updateClientDropdowns();
            renderEntries();
            renderClientBreakdown();
            updateSummary();
        }

        function updateClientDropdowns() {
            const options = '<option value="">Select...</option>' + clients.map(c => `<option value="${c}">${c}</option>`).join('');
            document.getElementById('timerClient').innerHTML = options;
            document.getElementById('manualClient').innerHTML = options;
            document.getElementById('filterClient').innerHTML = '<option value="">All Clients</option>' + clients.map(c => `<option value="${c}">${c}</option>`).join('');
        }

        function toggleTimer() {
            if (timerRunning) {
                stopTimer();
            } else {
                startTimer();
            }
        }

        function startTimer() {
            timerRunning = true;
            timerStart = Date.now();
            document.getElementById('timerBtn').className = 'timer-btn stop';
            document.getElementById('timerBtn').innerHTML = '<svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>';
            
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        function stopTimer() {
            timerRunning = false;
            clearInterval(timerInterval);
            
            const elapsed = Date.now() - timerStart;
            const hours = elapsed / (1000 * 60 * 60);
            
            if (hours >= 0.01) { // At least ~30 seconds
                const entry = {
                    id: Date.now().toString(),
                    client: document.getElementById('timerClient').value || 'General',
                    description: document.getElementById('timerProject').value || 'Timer session',
                    hours: Math.round(hours * 4) / 4, // Round to 15 min
                    date: new Date().toISOString().split('T')[0],
                    billable: true
                };
                entries.unshift(entry);
                saveData();
                renderAll();
            }

            document.getElementById('timerBtn').className = 'timer-btn start';
            document.getElementById('timerBtn').innerHTML = '<svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>';
            document.getElementById('timerDisplay').textContent = '00:00:00';
            document.getElementById('timerProject').value = '';
        }

        function updateTimerDisplay() {
            const elapsed = Date.now() - timerStart;
            const hours = Math.floor(elapsed / (1000 * 60 * 60));
            const mins = Math.floor((elapsed % (1000 * 60 * 60)) / (1000 * 60));
            const secs = Math.floor((elapsed % (1000 * 60)) / 1000);
            document.getElementById('timerDisplay').textContent = 
                `${String(hours).padStart(2, '0')}:${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        }

        function addManualEntry() {
            const client = document.getElementById('manualClient').value;
            const desc = document.getElementById('manualDesc').value;
            const hours = parseFloat(document.getElementById('manualHours').value);
            const date = document.getElementById('manualDate').value;
            const billable = document.getElementById('manualBillable').value === 'yes';

            if (!client || !hours || !date) {
                alert('Please fill in client, hours, and date');
                return;
            }

            entries.unshift({
                id: Date.now().toString(),
                client,
                description: desc || 'Manual entry',
                hours,
                date,
                billable
            });

            saveData();
            renderAll();

            document.getElementById('manualDesc').value = '';
            document.getElementById('manualHours').value = '';
        }

        function deleteEntry(id) {
            entries = entries.filter(e => e.id !== id);
            saveData();
            renderAll();
        }

        function getFilteredEntries() {
            const clientFilter = document.getElementById('filterClient').value;
            const periodFilter = document.getElementById('filterPeriod').value;
            const now = new Date();
            
            return entries.filter(e => {
                if (clientFilter && e.client !== clientFilter) return false;
                
                const entryDate = new Date(e.date);
                if (periodFilter === 'week') {
                    const weekAgo = new Date(now);
                    weekAgo.setDate(weekAgo.getDate() - 7);
                    return entryDate >= weekAgo;
                } else if (periodFilter === 'month') {
                    return entryDate.getMonth() === now.getMonth() && entryDate.getFullYear() === now.getFullYear();
                }
                return true;
            });
        }

        function renderEntries() {
            const filtered = getFilteredEntries();
            const tbody = document.getElementById('entriesBody');
            const empty = document.getElementById('emptyState');

            if (filtered.length === 0) {
                tbody.innerHTML = '';
                empty.style.display = 'block';
                return;
            }

            empty.style.display = 'none';
            tbody.innerHTML = filtered.slice(0, 50).map(e => `
                <tr>
                    <td>${formatDate(e.date)}</td>
                    <td><span class="client-badge">${e.client}</span></td>
                    <td>${e.description}</td>
                    <td class="hours-cell">${e.hours}h</td>
                    <td>${e.billable ? '‚úì' : '‚Äî'}</td>
                    <td>
                        <button class="delete-btn" onclick="deleteEntry('${e.id}')">
                            <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M6 18L18 6M6 6l12 12"/></svg>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function renderClientBreakdown() {
            const now = new Date();
            const monthEntries = entries.filter(e => {
                const d = new Date(e.date);
                return d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear();
            });

            const byClient = {};
            monthEntries.forEach(e => {
                byClient[e.client] = (byClient[e.client] || 0) + e.hours;
            });

            const total = Object.values(byClient).reduce((a, b) => a + b, 0);
            const sorted = Object.entries(byClient).sort((a, b) => b[1] - a[1]);

            const container = document.getElementById('clientBreakdown');
            if (sorted.length === 0) {
                container.innerHTML = '<div style="color:var(--gray-400); text-align:center; padding:40px;">No entries this month</div>';
                return;
            }

            container.innerHTML = sorted.map(([client, hours], i) => {
                const pct = total > 0 ? (hours / total * 100) : 0;
                const color = clientColors[i % clientColors.length];
                return `
                    <div class="client-card" style="border-left-color: ${color}">
                        <div class="client-card-header">
                            <div class="client-card-name">${client}</div>
                            <div class="client-card-hours">${hours.toFixed(1)}h</div>
                        </div>
                        <div class="client-bar">
                            <div class="client-bar-fill" style="width: ${pct}%; background: ${color}"></div>
                        </div>
                        <div class="client-card-percent">${pct.toFixed(0)}% of total</div>
                    </div>
                `;
            }).join('');
        }

        function updateSummary() {
            const now = new Date();
            
            // This week
            const weekAgo = new Date(now);
            weekAgo.setDate(weekAgo.getDate() - 7);
            const weekEntries = entries.filter(e => new Date(e.date) >= weekAgo);
            const weekHours = weekEntries.reduce((sum, e) => sum + e.hours, 0);
            document.getElementById('weekHours').textContent = weekHours.toFixed(1) + 'h';

            // This month
            const monthEntries = entries.filter(e => {
                const d = new Date(e.date);
                return d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear();
            });
            const monthHours = monthEntries.reduce((sum, e) => sum + e.hours, 0);
            document.getElementById('monthHours').textContent = monthHours.toFixed(1) + 'h';
            document.getElementById('monthEntries').textContent = monthEntries.length + ' entries';

            // Billable %
            const billableHours = monthEntries.filter(e => e.billable).reduce((sum, e) => sum + e.hours, 0);
            const billablePct = monthHours > 0 ? (billableHours / monthHours * 100) : 0;
            document.getElementById('billablePercent').textContent = billablePct.toFixed(0) + '%';

            // Top client
            const byClient = {};
            monthEntries.forEach(e => {
                byClient[e.client] = (byClient[e.client] || 0) + e.hours;
            });
            const sorted = Object.entries(byClient).sort((a, b) => b[1] - a[1]);
            if (sorted.length > 0) {
                document.getElementById('topClient').textContent = sorted[0][0];
                document.getElementById('topClientHours').textContent = sorted[0][1].toFixed(1) + ' hours';
            } else {
                document.getElementById('topClient').textContent = '‚Äî';
                document.getElementById('topClientHours').textContent = '0 hours';
            }
        }

        function formatDate(dateStr) {
            const d = new Date(dateStr);
            return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        }

        function manageClients() {
            renderClientList();
            document.getElementById('clientModal').style.display = 'flex';
        }

        function closeClientModal() {
            document.getElementById('clientModal').style.display = 'none';
        }

        function renderClientList() {
            document.getElementById('clientList').innerHTML = clients.map(c => `
                <div style="display:flex; justify-content:space-between; align-items:center; padding:10px; background:var(--gray-50); border-radius:8px; margin-bottom:8px;">
                    <span>${c}</span>
                    <button onclick="removeClient('${c}')" style="background:none; border:none; color:var(--gray-400); cursor:pointer;">‚úï</button>
                </div>
            `).join('');
        }

        function addClient() {
            const name = document.getElementById('newClientName').value.trim();
            if (name && !clients.includes(name)) {
                clients.push(name);
                saveData();
                renderClientList();
                updateClientDropdowns();
                document.getElementById('newClientName').value = '';
            }
        }

        function removeClient(name) {
            clients = clients.filter(c => c !== name);
            saveData();
            renderClientList();
            updateClientDropdowns();
        }

        function exportReport() {
            const filtered = getFilteredEntries();
            const total = filtered.reduce((sum, e) => sum + e.hours, 0);
            
            let rows = filtered.map(e => `
                <tr>
                    <td>${e.date}</td>
                    <td>${e.client}</td>
                    <td>${e.description}</td>
                    <td>${e.hours}h</td>
                    <td>${e.billable ? 'Yes' : 'No'}</td>
                </tr>
            `).join('');

            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html><head><title>Time Report</title>
                <style>
                    body { font-family: Arial, sans-serif; padding: 40px; max-width: 900px; margin: 0 auto; }
                    h1 { color: #35575f; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th { background: #f3f4f6; padding: 12px; text-align: left; }
                    td { padding: 12px; border-bottom: 1px solid #e5e7eb; }
                    .total { font-size: 1.5rem; margin: 20px 0; }
                </style></head>
                <body>
                    <h1>‚è±Ô∏è Time Tracking Report</h1>
                    <p>Generated: ${new Date().toLocaleDateString()}</p>
                    <div class="total"><strong>Total Hours:</strong> ${total.toFixed(1)}h</div>
                    <table>
                        <thead><tr><th>Date</th><th>Client</th><th>Description</th><th>Hours</th><th>Billable</th></tr></thead>
                        <tbody>${rows}</tbody>
                    </table>
                </body></html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById(`${tabName}-tab`).classList.add('active');
            event.target.closest('.tab').classList.add('active');
        }
    </script>
</body>
</html>
